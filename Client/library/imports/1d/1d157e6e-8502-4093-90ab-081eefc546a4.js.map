{"version":3,"sources":["assets\\Scripts\\Modules\\Views\\ViewToast.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,gDAA2C;AAE3C;IAAuC,6BAAI;IAA3C;QAAA,qEAsFC;QAjFW,oBAAc,GAAkB,EAAE,CAAC;QACnC,oBAAc,GAAG,CAAC,CAAC;;IAgF/B,CAAC;IA9EU,2BAAO,GAAd;QAEI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;QACjD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;IACrD,CAAC;IAEM,8BAAU,GAAjB;IAGA,CAAC;IAEM,8BAAU,GAAjB;IAGA,CAAC;IAEM,2BAAO,GAAd;IAGA,CAAC;IAEM,8BAAU,GAAjB;IAGA,CAAC;IAEM,6BAAS,GAAhB;QAEI,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;IAC5B,CAAC;IAEO,gCAAY,GAApB;QAEI,IAAI,GAAG,GAAW,IAAI,CAAC;QACvB,IAAG,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EACjC;YACI,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;SACnC;QACD,IAAG,GAAG,IAAI,IAAI,EACd;YACI,GAAG,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACrC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;YAC7B,GAAG,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;SAC/B;QACD,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;QAClB,GAAG,CAAC,OAAO,GAAG,GAAG,CAAC;QAClB,GAAG,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;QAC5B,OAAO,GAAG,CAAC;IACf,CAAC;IAEM,4BAAQ,GAAf,UAAgB,OAAc;QAE1B,kCAAkC;QAClC,IAAI,CAAC,cAAc,EAAG,CAAC;QACvB,IAAI,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACpC,EAAE,CAAC,IAAI,CAAC,eAAe,EAAC,SAAS,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,OAAO,CAAC;QAC3E,EAAE,CAAC,IAAI,CAAC,6BAA6B,EAAC,SAAS,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,OAAO,CAAC;QACzF,EAAE,CAAC,IAAI,CAAC,kBAAkB,EAAC,SAAS,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,eAAe,EAAE,CAAC;QAEhF,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC;YACvB,SAAS,CAAC,MAAM,GAAG,KAAK,CAAC;YACzB,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACvC,OAAO,CAAC,cAAc,EAAG,CAAC;YAC1B,IAAG,OAAO,CAAC,cAAc,IAAI,CAAC,EAC9B;gBACI,OAAO,CAAC,cAAc,GAAG,CAAC,CAAC;gBAC3B,OAAO,CAAC,IAAI,EAAE,CAAC;aAClB;QACL,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QAEf,IAAI,KAAK,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,EAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,EAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,EAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAElH,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IAE/B,CAAC;IAEL,gBAAC;AAAD,CAtFA,AAsFC,CAtFsC,cAAI,GAsF1C","file":"","sourceRoot":"/","sourcesContent":["import View from \"../../MVCFramework/View\";\n\nexport default class ViewToast extends View\n{\n    private ToastItem:cc.Node;\n    private ToastObjs:cc.Node;\n\n    private unuseToastItem:Array<cc.Node> = [];\n    private toastingObjCnt = 0;\n\n    public OnAwake()\n    {\n        this.ToastItem = this.FindTransform(\"ToastItem\");\n        this.ToastObjs = this.FindTransform(\"ToastObjs\");\n    }\n\n    public OnShowView()\n    {\n        \n    }\n\n    public OnHideView()\n    {\n        \n    }\n\n    public OnFocus()\n    {\n        \n    }\n\n    public OnDisFocus()\n    {\n        \n    }\n\n    public OnDestroy()\n    {\n        this.unuseToastItem = [];\n        this.toastingObjCnt = 0;\n    }\n\n    private GetToastItem():cc.Node\n    {\n        let ret:cc.Node = null;\n        if(this.unuseToastItem.length > 0)\n        {\n            ret = this.unuseToastItem.pop();\n        }\n        if(ret == null)\n        {\n            ret = cc.instantiate(this.ToastItem);\n            this.ToastObjs.addChild(ret);\n            ret.position = cc.Vec2.ZERO;\n        }\n        ret.active = true;\n        ret.opacity = 255;\n        ret.position = cc.Vec2.ZERO;\n        return ret;\n    }\n\n    public AddToast(content:string)\n    {\n        // cc.error(\"content  \"+ content);\n        this.toastingObjCnt ++;\n        let toastItem = this.GetToastItem();\n        cc.find(\"LabelContent1\",toastItem).getComponent(cc.Label).string = content;\n        cc.find(\"LabelContent1/LabelContent2\",toastItem).getComponent(cc.Label).string = content;\n        cc.find(\"LabelContent1/BG\",toastItem).getComponent(cc.Widget).updateAlignment();\n\n        let outside = this;\n        var finished = cc.callFunc(function () {\n            toastItem.active = false;\n            outside.unuseToastItem.push(toastItem);\n            outside.toastingObjCnt --;\n            if(outside.toastingObjCnt <= 0)\n            {\n                outside.toastingObjCnt = 0;\n                outside.Hide();\n            }\n        }, this, null);\n\n        let spawn = cc.sequence(cc.moveBy(1, 0, 50),cc.spawn(cc.moveBy(2, 0, 100),cc.sequence(cc.fadeOut(2.0),finished)));\n\n        toastItem.runAction(spawn);\n        \n    }\n\n}\n"]}