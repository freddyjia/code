{"version":3,"sources":["assets\\Scripts\\Tools\\Extension.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import TimerManager from \"../Components/TimerManager\";\nimport NodeUtil from \"./NodeUtil\";\nimport XTweenObserver from \"./XTween/Base/XTweenObserver\";\nimport Vec2 = cc.Vec2;\nimport ccC from \"./ccC\";\n\nexport default class Extension {\n    public static SearchNode(transform: cc.Node, childname: string): cc.Node | null {\n        for (let i = 0; i < transform.childrenCount; i++) {\n            let child = transform.children[i]\n            if (child.name == childname) {\n                return child\n            }\n            let result = Extension.SearchNode(child, childname)\n            if (result != null) {\n                return result\n            }\n        }\n        return null\n    }\n\n    public static DirGetAbTrans(path, callback: (err: Error, prefab: cc.Node) => void, transParent) {\n        Extension.DirGetAbObj(path, (err: Error, prefab: cc.Node) => {\n            if (transParent != null) {\n                prefab.parent = (transParent)\n                prefab.scale = 1\n                prefab.position = Vec2.ZERO\n                if (callback != null) {\n                    callback(err, prefab)\n                }\n            }\n        })\n    }\n\n\n    public static SearchSprite(transform: cc.Node, childname: string): cc.Sprite | null {\n        let node = Extension.SearchNode(transform, childname)\n        if (node != null) {\n            return node.getComponent(cc.Sprite)\n        }\n        return null\n    }\n\n    public static SearchBtn(transform: cc.Node, childname: string): cc.Button | null {\n        let node = Extension.SearchNode(transform, childname)\n        if (node != null) {\n            return node.getComponent(cc.Button)\n        }\n        return null\n    }\n\n    public static SearchTxt(transform: cc.Node, childname: string): cc.Label | null {\n        let node = Extension.SearchNode(transform, childname)\n        if (node != null) {\n            return node.getComponent(cc.Label)\n        }\n        return null\n    }\n\n    public static GetGenderByName(headName: string | null): boolean {\n        if (headName == null) {\n            return true\n        }\n        if (headName.length == null) {\n            return true\n        }\n        return headName.indexOf(\"_M_\") != -1\n    }\n\n\n    public static DirGetAbObj(path: string, callback: (err: Error, prefab: cc.Node) => void) {\n        ccC.loadRes(path, cc.Prefab, (newError: Error, node: any) => {\n            if (newError == null) {\n                callback(newError, cc.instantiate(node))\n            } else {\n                callback(newError, null)\n            }\n\n        })\n    }\n\n    public static ClearArr(arr) {\n        if (arr == null) {\n            return\n        }\n        let len = arr.length\n        for (let i = 0; i < len; i++) {\n            arr.shift()\n        }\n    }\n\n    public static SetAsLastSibling(trans: cc.Node) {\n        let total = trans.parent.childrenCount - 1\n        trans.setSiblingIndex(total)\n    }\n\n    public static JSObjectLength(obj): number {\n        let cnt = 0\n        for (let key in obj) {\n            cnt = cnt + 1\n        }\n        return cnt\n    }\n\n    public static DelayCall(func, delay, parm = null, repeatCnt = 0, interval = null, keepAlive = false): string {\n        let _interval = interval\n        if (_interval == null) {\n            _interval = delay\n        }\n        return TimerManager.GetInstance().CallActionDelay(func, delay, parm, repeatCnt, _interval, keepAlive)\n    }\n\n    public static CancelDelayCall(id) {\n        TimerManager.GetInstance().DeleteTimer(id)\n    }\n\n    public static DirGetAbSprite(img: cc.Sprite, atlasPath: string, spriteName: string, finishCallback: () => void = null) {\n        NodeUtil.SetSpriteFrame(img, atlasPath, spriteName, finishCallback)\n    }\n\n    public static ClearXTween(node: cc.Node) {\n        let ob = node.getComponent(XTweenObserver)\n        if (ob != null) {\n            node.removeComponent(ob)\n        }\n    }\n\n    public static GetTimeString(time) {\n        let Day = 24 * 3600 * 1000;\n        let date = new Date();\n        date.setTime(Date.now());\n        let today = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n        let msgTime = Number(time);\n        if (today.getTime() <= msgTime)\n        {\n            date = new Date();\n            date.setTime(msgTime);\n            let hour = date.getHours()<10 ? \"0\"+date.getHours() : date.getHours();\n            let min = date.getMinutes()<10 ? \"0\"+date.getMinutes() : date.getMinutes();\n            return hour + \":\" + min;\n        }\n        else\n        {\n            let diff = today.getTime() - msgTime;\n            if (diff <= Day)\n            {\n                return \"昨天\";\n            }\n            else if (diff <= 2*Day)\n            {\n                return \"前天\";\n            }\n            else\n            {\n                return \"3天前\";\n            }\n        }\n    }\n}"]}