{"version":3,"sources":["assets\\Scripts\\Modules\\Controllers\\ControllerApp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Controller from \"../../MVCFramework/Controller\";\r\nimport MessageNames from \"../MessageNames\";\r\nimport ViewApp from \"../Views/ViewApp\";\r\nimport { ViewNames, ModelNames } from \"../MVCRegister\";\r\nimport ModelApp from \"../Models/ModelApp\";\r\nimport Toast from \"../../Tools/Toast\";\r\nimport { ImageTool } from \"../../JsTool/ImageTool\";\r\nimport OpenNetworkingUI from \"../../Tools/OpenNetworkingUI\";\r\n\r\nexport default class ControllerChat extends Controller\r\n{\r\n    viewAppStart:ViewApp;\r\n    testImage = new Image();\r\n\r\n    modelApp:ModelApp;\r\n\r\n\r\n    public Init()\r\n    {\r\n        this.modelApp = this.GetModel(ModelNames.ModelApp) as ModelApp;\r\n        this.modelApp.SetSelfPlayerID(window[\"selfId\"]);\r\n    }\r\n\r\n    public Clean()\r\n    {\r\n        \r\n    }\r\n\r\n    public OnReceiveMessage(msg:string,msgBody:any)\r\n    {\r\n        console.log(\"msg\",msg)\r\n        // if(msg == MessageNames.StartLogin)\r\n        // {\r\n        //     this.modelApp.StartLogin();\r\n        // }\r\n        // else if(msg == MessageNames.ShowAppStartView)\r\n        // {\r\n        //     this.ShowAppStartView();\r\n        // }\r\n        this.ShowAppStartView();\r\n    }\r\n\r\n\r\n    public ShowAppStartView()\r\n    {\r\n        if (this.viewAppStart == null) {\r\n            this.viewAppStart = this.GetView(ViewNames.ViewApp) as ViewApp;\r\n            cc.log(\"sssss\")\r\n            //界面1逻辑按钮\r\n            this.viewAppStart.SetOnClick(\"BtnBack\", () => {\r\n                cc.log(\"退出\")\r\n            });\r\n            this.viewAppStart.SetOnClick(\"BtnSubmit\", () => {\r\n\r\n                if (this.viewAppStart.GetEditBoxStr() == null) {\r\n                    Toast.Show(\"金额不能为空\");\r\n                    //   Dialog.ShowJustYesButton(DialogType.Normal, \"提示\", \"金额不能为空\", \"好的\", () => { });\r\n                    return;\r\n                }\r\n                if (Number(this.viewAppStart.GetEditBoxStr()) <= 0) {\r\n                    Toast.Show(\"请填写正确金额\");\r\n                    // Dialog.ShowJustYesButton(DialogType.Normal, \"提示\", \"请填写正确金额\", \"好的\", () => { });\r\n                    return;\r\n                }\r\n                cc.log(\"确认充值\")\r\n\r\n                //充值数据\r\n                this.viewAppStart.ShowComByType(2)\r\n\r\n            })\r\n            //界面2逻辑按钮\r\n            this.viewAppStart.SetOnClick(\"BtnUpload\", () => {\r\n                cc.log(\"上传\")\r\n                ImageTool.Get((imageData: string) => {\r\n                    this.testImage.onload = () => {\r\n                        this.viewAppStart.ShowImageUpload(imageData);\r\n                        if (imageData.length == 0) {\r\n                            Toast.Show(\"不能发送空信息\");\r\n                            return;\r\n                        }\r\n\r\n                        // if (this.viewChat.curProxyId == null || this.viewChat.curProxyId.length == 0) {\r\n                        //     Toast.Show(\"请您选择一个代理进行咨询\");\r\n                        //     return;\r\n                        // }\r\n                        // let content = this.testImage.width + \"|\" + this.testImage.height + \"&size&\" + imageData;\r\n                        // this.modelChat.SendChatMsg(this.modelChat.selfPlayerId, this.viewChat.curProxyId, MsgType.Image, content);\r\n                    };\r\n                    this.testImage.src = imageData;\r\n\r\n                });\r\n\r\n            })\r\n            this.viewAppStart.SetOnClick(\"BtnSubmit_info\", () => {\r\n                cc.log(\"确认订单\")\r\n                 this.viewAppStart.ShowComByType(3);\r\n            })\r\n            this.viewAppStart.SetOnClick(\"BtnBack_info\", () => {\r\n                cc.log(\"离开info界面\")\r\n                this.viewAppStart.ShowComByType(1);\r\n            })\r\n            this.viewAppStart.SetOnClick(\"BtnHistory_info\", () => {\r\n                cc.log(\"进去历史订单界面\")\r\n                this.viewAppStart.ShowComByType(3);\r\n                this.viewAppStart.InitDataPicker();\r\n            })\r\n            this.viewAppStart.addBtnCopyClick();\r\n            //界面3逻辑按钮\r\n            // this.viewPayEn.SetOnClick(\"BtnBack_history\", () => {\r\n            //     cc.log(\"离开历史订单界面\")\r\n            // })\r\n\r\n        }\r\n\r\n        this.viewAppStart.SetSelfPlayerID(window[\"selfId\"]);\r\n        this.viewAppStart.Show(() => {\r\n              // 请求协议\r\n            OpenNetworkingUI.Hide();\r\n            this.viewAppStart.ShowComByType(1);\r\n            let data = null;\r\n            this.viewAppStart.UpdataPage(data)\r\n\r\n        });\r\n\r\n      \r\n       \r\n    }\r\n}\r\n"]}